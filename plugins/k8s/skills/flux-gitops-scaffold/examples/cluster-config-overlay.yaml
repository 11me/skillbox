# infra/{env}/cluster/configs/{component}/kustomization.yaml
# Cluster config overlay - references base and patches with env-specific values
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
  - ../../../../base/cluster/configs/cluster-issuer

patches:
  - path: cluster-issuer.yaml
---
# infra/{env}/cluster/configs/{component}/cluster-issuer.yaml
# Environment-specific patch for ClusterIssuer
apiVersion: cert-manager.io/v1
kind: ClusterIssuer
metadata:
  name: letsencrypt
spec:
  acme:
    # Use staging for dev/staging, production for prod
    server: https://acme-staging-v02.api.letsencrypt.org/directory
    email: dev-admin@example.com
    privateKeySecretRef:
      name: letsencrypt-dev-key
